<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>
    <h1>Прокрути меня</h1>

    <script>

        let date = new Date();

        document.body.style.height = '1000px';

        let scrollHeight = Math.max( // вычисляем полную высоту документа
            document.body.scrollHeight, document.documentElement.scrollHeight,
            document.body.offsetHeight, document.documentElement.offsetHeight,
            document.body.clientHeight, document.documentElement.clientHeight
        );

        let allH = scrollHeight - 100; // полная высота документа - 100 px;
        let lastDiv = null;

        document.addEventListener('scroll', function (event) {
            // считать координаты документа
            // scrollHeight - offsetHeight - clientHeight
            let h = document.documentElement.scrollTop + document.documentElement.clientHeight - 100; // h это сколько прокручено + внутренняя высота блока, с учетом padding, без учета рамок и -100, т.е.
            // h это прокрутка до конца документа не доходя 100px

            if (h === allH) {
                // когда прокрутка произошла до конца, мы должны запустить цикл, чтобы создавались новые див снова и снова..
                // когда в видимой часть документа есть свободное место
                //или созданный див и добавленный в боди вне видимость clientHeight, значит страница заполнена дивами полностью
                divShow();
                lastClassDiv();
                console.log(lastDiv.innerHTML);
            }
            divShow();
            divShow();
            divShow();
            divShow();
            divShow();
        });

        function divShow() {
            let div = document.createElement('div');
            div.innerHTML = `Date: ${date}`;
            document.body.append(div);
            div.classList = "many";

            let span = document.createElement('div');
            //span.innerHTML = "Это второй контейнер";
            document.body.append(span);
            span.classList = "many";
        }
        function lastClassDiv() {
            lastDiv = document.querySelectorAll("document.body > .many:last-child");
        }

        if ((window.innerHeight - 100)) {
            let div = document.createElement('div');
            div.innerHTML = `Date: ${date}`;
            document.body.append(div);
        }

    </script>
</body>

</html>